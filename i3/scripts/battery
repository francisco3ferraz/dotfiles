#!/bin/bash

# Battery 1
BAT=/sys/class/power_supply/BAT1
# Check if BAT1 exists, if not try BAT0
if [ ! -d $BAT ]; then
    BAT=/sys/class/power_supply/BAT0
fi

# Get capacity and status
capacity=$(cat $BAT/capacity 2>/dev/null)
status=$(cat $BAT/status 2>/dev/null)

if [ -z "$capacity" ]; then
    echo "No Bat"
    echo "No Bat"
    exit 0
fi

if [ "$status" = "Charging" ]; then
    icon="󰂄"
else
    # Discharging or Full or Unknown
    if [ "$capacity" -ge 95 ]; then
        icon="󰁹"
    elif [ "$capacity" -ge 80 ]; then
        icon="󰂂"
    elif [ "$capacity" -ge 60 ]; then
        icon="󰂀"
    elif [ "$capacity" -ge 40 ]; then
        icon="󰁾"
    elif [ "$capacity" -ge 20 ]; then
        icon="󰁼"
    else
        icon="󰁺"
    fi
fi

echo "$icon $capacity%"
echo "$icon $capacity%"

# Color
if [ "$status" = "Charging" ]; then
    echo "#b8bb26" # Green
elif [ "$capacity" -le 20 ]; then
    echo "#fb4934" # Red
elif [ "$capacity" -le 40 ]; then
    echo "#fab387" # Orange
fi
